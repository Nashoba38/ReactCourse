(this.webpackJsonpspotify=this.webpackJsonpspotify||[]).push([[0],{108:function(e,t){e.exports="068737bc88d94c4c9f1d5b963003a462"},121:function(e,t,a){e.exports=a(198)},131:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),c=a(14),o=a.n(c),s=(a(39),a(12)),l=a(3),m=a(9),u=a(108),d=a.n(u),p={getAccessToken:function(){if(n)return n;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t){n=e[1];var a=Number(t[1]);return window.setTimeout((function(){return n=""}),1e3*a),window.history.pushState("Access Token",null,"/"),console.log(n),n}var r="https://accounts.spotify.com/authorize?client_id=".concat(d.a,"&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("http://localhost:3000/");window.location=r}},f=a(37),h=a.n(f),v=function(e){var t=e.track,a=e.index,n=e.playTrack;return i.a.createElement("div",{role:"listitem",className:"item track-list",onClick:function(){n(t)}},i.a.createElement("div",{className:"track-number"},a+1),i.a.createElement("div",{className:"content"},i.a.createElement("a",{className:"header track-name"},t.name),i.a.createElement("a",{className:"description"},h()(t.duration_ms))))},g=a(10),E=a(119),b=a(4),y=a(109),k=a(110),N=a(120),j=a(118),w=a(61),O=a.n(w),x=a(117),A=a(35),S=a.n(A),_=a(62),P=(a(130),a(131),[].join("\n"),[{name:"Despacito",singer:"Luis Fonsi",cover:"http://res.cloudinary.com/alick/image/upload/v1502689731/Despacito_uvolhp.jpg",musicSrc:function(){return Promise.resolve("http://res.cloudinary.com/alick/video/upload/v1502689683/Luis_Fonsi_-_Despacito_ft._Daddy_Yankee_uyvqw9.mp3")}},{name:"Bedtime Stories",singer:"Jay Chou",cover:"http://res.cloudinary.com/alick/image/upload/v1502375978/bedtime_stories_bywggz.jpg",musicSrc:"http://res.cloudinary.com/alick/video/upload/v1502375674/Bedtime_Stories.mp3"}]),L=[{name:"Despacito",singer:"Luis Fonsi",cover:"http://res.cloudinary.com/alick/image/upload/v1502689731/Despacito_uvolhp.jpg",musicSrc:function(){return Promise.resolve("http://res.cloudinary.com/alick/video/upload/v1502689683/Luis_Fonsi_-_Despacito_ft._Daddy_Yankee_uyvqw9.mp3")}},{name:"Bedtime Stories",singer:"Jay Chou",cover:"http://res.cloudinary.com/alick/image/upload/v1502375978/bedtime_stories_bywggz.jpg",musicSrc:"http://res.cloudinary.com/alick/video/upload/v1502375674/Bedtime_Stories.mp3"},{name:"Dorost Nemisham",singer:"Sirvan Khosravi",cover:"https://res.cloudinary.com/ehsanahmadi/image/upload/v1573758778/Sirvan-Khosravi-Dorost-Nemisham_glicks.jpg",musicSrc:function(){return Promise.resolve("https://res.cloudinary.com/ehsanahmadi/video/upload/v1573550770/Sirvan-Khosravi-Dorost-Nemisham-128_kb8urq.mp3")}}],C={audioLists:P,defaultPlayIndex:0,theme:"dark",bounds:"body",clearPriorAudioLists:!1,autoPlayInitLoadPlayList:!0,preload:!0,glassBg:!1,remember:!1,remove:!0,defaultPosition:{top:300,left:120},playModeText:{order:"Play all once",orderLoop:"Repeat all",singleLoop:"Repeat 1",shufflePlay:"Shuffle"},openText:"\u6253\u5f00",closeText:"\u5173\u95ed",checkedText:"\u5f00",unCheckedText:"\u5173",notContentText:"No tracks",panelTitle:"Playlist",defaultPlayMode:"order",mode:"full",once:!0,autoPlay:!0,toggleMode:!0,showMiniModeCover:!0,showMiniProcessBar:!1,drag:!0,seeked:!0,controllerTitle:i.a.createElement(S.a,null),showProgressLoadBar:!0,showPlay:!0,showReload:!0,showDownload:!1,showPlayMode:!0,showThemeSwitch:!1,showLyric:!0,extendsContent:[""],defaultVolume:100,playModeShowTime:600,loadAudioErrorPlayNext:!0,autoHiddenCover:!0,onAudioDownload:function(e){},onAudioPlay:function(e){},onAudioPause:function(e){},onAudioSeeked:function(e){},onAudioVolumeChange:function(e){},onAudioEnded:function(e){},onAudioAbort:function(e){},onAudioProgress:function(e){},onAudioReload:function(e){},onAudioLoadError:function(e){},onThemeChange:function(e){},onAudioListsChange:function(e,t,a){},onAudioPlayTrackChange:function(e,t,a){},onPlayModeChange:function(e){},onModeChange:function(e){},onAudioListsPanelChange:function(e){},onAudioListsDragEnd:function(e,t){},onAudioLyricChange:function(e,t){},getContainer:function(){return document.body},getAudioInstance:function(e){}},T=function(e){Object(N.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).state={params:C},n.onAddAudio=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{audioLists:[].concat(Object(E.a)(n.state.params.audioLists),[{name:"I'm new here",singer:"jack",cover:"http://www.lijinke.cn/music/1387583682387727.jpg",musicSrc:"http://www.lijinke.cn/music/".concat(Date.now(),".mp3")}])});n.setState({params:e})},n.extendsContent=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{extendsContent:i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{onClick:function(){return O()("I'm extends content")}},"button1"),i.a.createElement("button",{onClick:function(){return O()("I'm extends content")}},"button2"))});n.setState({params:e})},n.onChangeToFirstAudioList=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{clearPriorAudioLists:!0,audioLists:P});n.setState({params:e})},n.onChangeToSecondAudioList=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{clearPriorAudioLists:!0,audioLists:L});n.setState({params:e})},n.onAutoPlayMode=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{autoPlay:!n.state.params.autoPlay});n.setState({params:e})},n.onAutoPlayInitLoadPlayList=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{autoPlayInitLoadPlayList:!n.state.params.autoPlayInitLoadPlayList});n.setState({params:e})},n.onShowGlassBg=function(){n.onChangeKey("glassBg")},n.onDrag=function(){n.onChangeKey("drag")},n.onToggleMode=function(){n.onChangeKey("toggleMode")},n.onSeeked=function(){n.onChangeKey("seeked")},n.onChangeKey=function(e){var t=Object(b.a)(Object(b.a)({},n.state.params),{},Object(g.a)({},e,!n.state.params[e]));"light"!==e&&"dark"!==e||(t.theme=e),"full"!==e&&"mini"!==e||(t.mode=e),n.setState({params:t})},n.showMiniProcessBar=function(){n.onChangeKey("showMiniProcessBar")},n.showMiniModeCover=function(){n.onChangeKey("showMiniModeCover")},n.playModeShowTime=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{playModeShowTime:Object(_.createRandomNum)(200,2e3)});n.setState({params:e})},n.changePlayIndex=function(){var e=Object(b.a)(Object(b.a)({},n.state.params),{},{playIndex:Object(_.createRandomNum)(0,n.state.params.audioLists.length)});n.setState({params:e})},n}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(Object(b.a)({},this.state.params),{},{clearPriorAudioLists:!0,audioLists:this.props.audioList});this.setState({params:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(e.audioList!==t.audioList){var a=Object(b.a)(Object(b.a)({},this.state.params),{},{clearPriorAudioLists:!0,audioLists:this.props.audioList,defaultPlayMode:"singleLoop"});this.setState({params:a})}}},{key:"render",value:function(){var e=this.state.params;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:"settings"}),i.a.createElement(x.a,e))}}]),a}(i.a.PureComponent),M=function(){return i.a.createElement("div",{className:"ui "},i.a.createElement("div",{className:"ui active inverted dimmer sixteen wide column loading"},i.a.createElement("div",{className:"ui text active loader"},"Preparing...")))},D=function(e){var t=e.tracks,a=e.imageAlbum,n=Object(r.useState)([]),c=Object(m.a)(n,2),o=c[0],s=c[1];Object(r.useEffect)((function(){var e=t.map((function(e){var t=e.artists.map((function(e){return e.name}));return{name:e.name,singer:t.join(),cover:e.image||a,musicSrc:function(){return Promise.resolve(e.mp3)}}}));s(e)}),[t]);var l=function(e){console.log(JSON.stringify(e.image)),console.log("playTrack",e.mp3);var t=e.artists.map((function(e){return e.name}));s([{name:e.name,singer:t.join(),cover:e.image||a,musicSrc:function(){return Promise.resolve(e.mp3)}}])},u=t.map((function(e,t){return i.a.createElement(v,{key:t,track:e,index:t,playTrack:l})}));return i.a.createElement("div",null,t.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{role:"list",className:"ui divided relaxed list"},u),i.a.createElement("div",null,i.a.createElement(T,{audioList:o}))):i.a.createElement(M,null))},B=Object(l.f)((function(e){var t=e.match.params.id,a=Object(r.useState)({}),n=Object(m.a)(a,2),c=n[0],o=n[1],l=Object(r.useState)([]),u=Object(m.a)(l,2),d=u[0],f=u[1],v=Object(r.useState)([]),g=Object(m.a)(v,2),E=g[0],b=g[1];Object(r.useEffect)((function(){y(t),k(t)}),[]);var y=function(e){var t=p.getAccessToken();fetch("https://api.spotify.com/v1/albums/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(t){if(!t)return null;var a={id:e,name:t.name,release_date:t.release_date.substring(0,4),total_tracks:t.total_tracks,artists:t.artists,image:t.images[1].url,pupularity:t.popularity,uri:t.uri};return o(a),f(t.artists),a})).catch((function(e){return console.log(e)}))},k=function(e){var t=p.getAccessToken();fetch("https://api.spotify.com/v1/albums/".concat(e,"/tracks"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){if(!e.items)return[];var t=e.items.map((function(e){return{id:e.id,name:e.name,duration_ms:e.duration_ms,mp3:e.preview_url,type:e.type,uri:e.uri,artists:e.artists,album:c.image}}));return b(t),t})).catch((function(e){return console.log(e)}))},N=d.map((function(e){return i.a.createElement("span",{key:e.id},i.a.createElement(s.b,{to:"/artist/".concat(e.id)},e.name))}));return i.a.createElement("div",{className:"album-page"},c?i.a.createElement("div",{className:"ui grid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"sixteen wide column"},i.a.createElement("div",{className:"ui grid"},i.a.createElement("img",{src:c.image,className:"album-image"}),i.a.createElement("div",{className:"album-page-header-info pt-4"},i.a.createElement("span",{className:"text-2xl"},c.name),i.a.createElement("div",null,"by ",i.a.createElement("span",{className:"text-pink-500"},N)),i.a.createElement("div",null,i.a.createElement("span",null,c.release_date)," \u25cf",i.a.createElement("span",null," ",function(e){var t=e.reduce((function(e,t){return e+t.duration_ms}),0);return h()(t)}(E)," ")," \u25cf",i.a.createElement("span",null," ",E.length," tracks ")))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"sixteen wide column"},i.a.createElement(D,{tracks:E,imageAlbum:c.image||null})))):i.a.createElement(M,null))})),F=function(e){var t=e.search;return i.a.createElement("div",{className:"ui action input search-bar"},i.a.createElement("input",{type:"text",placeholder:"Search albums...","wtx-context":"6921A6D0-8BA7-4F93-8AD1-F489A90CD245",onChange:function(e){t(e.target.value)}}),i.a.createElement("button",{className:"ui icon button"},i.a.createElement("i",{className:"search icon"})))},I=function(e){var t=e.album,a=t.artists.map((function(e){return i.a.createElement("div",{key:e.id},e.name)}));return i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"image image"},i.a.createElement(s.b,{to:"/album/".concat(t.id)},i.a.createElement("img",{src:t.image}))),i.a.createElement("div",{className:"content"},i.a.createElement(s.b,{to:"/album/".concat(t.id)},i.a.createElement("div",{className:"header card-header"},t.name)),i.a.createElement("div",{className:"meta"}),i.a.createElement("div",{className:"description"},a)),i.a.createElement("div",{className:"extra content"},i.a.createElement("span",{className:"right floated"},"Release year: ",t.release_date.substring(0,4)),i.a.createElement("span",{className:"left floated"},t.total_tracks," tracks")))},z=function(e){var t=e.albums.map((function(e){return i.a.createElement(I,{album:e,key:e.id})}));return i.a.createElement("div",{className:"ui link cards image-list"},t)};var K=function(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),a=t[0],n=t[1];Object(r.useEffect)((function(){c("Enya")}),[]);var c=function(e){var t=p.getAccessToken();fetch("https://api.spotify.com/v1/search?type=album&q=".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){if(!e.albums)return[];var t=e.albums.items.map((function(e){return{id:e.id,name:e.name,release_date:e.release_date,total_tracks:e.total_tracks,artists:e.artists,image:e.images[1].url,uri:e.uri}}));return n(t),t})).catch((function(e){return console.log(e)}))};return i.a.createElement("div",{className:"App"},i.a.createElement(F,{search:c}),a.length>0?i.a.createElement(z,{albums:a}):i.a.createElement(M,null))},R=function(e){var t=e.artist,a=t.genres.map((function(e){return i.a.createElement("div",{className:"ui pink horizontal label genre"},e)}));return i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"image"},i.a.createElement(s.b,{to:"/artist/".concat(t.id)},i.a.createElement("img",{src:t.image,className:"artist-card-image"}))),i.a.createElement("div",{className:"content"},i.a.createElement(s.b,{to:"/artist/".concat(t.id)},i.a.createElement("div",{className:"header card-header text-pink-500"},t.name)),i.a.createElement("div",{className:"meta"}),i.a.createElement("div",{className:"description"},a)),i.a.createElement("div",{className:"extra content"},i.a.createElement("span",{className:"right floated"},"Followers: ",t.followers),i.a.createElement("span",{className:"left floated"},"Popularity: ",t.popularity)))},J=function(e){var t=e.artists.map((function(e){return i.a.createElement(R,{artist:e,key:e.id})}));return i.a.createElement("div",{className:"ui link cards image-list"},t)},q=Object(l.f)((function(e){var t=e.match,a=p.getAccessToken(),n=t.params.id,c=Object(r.useState)({}),o=Object(m.a)(c,2),s=o[0],l=o[1],u=Object(r.useState)([]),d=Object(m.a)(u,2),f=d[0],h=d[1],v=Object(r.useState)([]),E=Object(m.a)(v,2),b=E[0],y=E[1];Object(r.useEffect)((function(){k(n),N(n),j(n)}),[n]);var k=function(e){fetch("https://api.spotify.com/v1/artists/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(t){if(!t)return null;var a={id:e,name:t.name,followers:t.followers.total,genres:t.genres,popularity:t.popularity,type:t.type,image:t.images[1].url,uri:t.uri};return l(a),a})).catch((function(e){return console.log(e)}))},N=function(e){fetch("https://api.spotify.com/v1/artists/".concat(e,"/top-tracks?country=FR"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(t){if(!t.tracks)return null;var a=t.tracks.map((function(t){var a;return a={id:e,album:t.album,name:t.name,popularity:t.popularity},Object(g.a)(a,"album",t.album),Object(g.a)(a,"duration_ms",t.duration_ms),Object(g.a)(a,"type",t.type),Object(g.a)(a,"mp3",t.preview_url),Object(g.a)(a,"uri",t.uri),Object(g.a)(a,"artists",t.artists),Object(g.a)(a,"image",t.album.images[1].url),a}));return h(a),a})).catch((function(e){return console.log(e)}))},j=function(e){fetch("https://api.spotify.com/v1/artists/".concat(e,"/related-artists"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){if(!e.artists)return[];var t=e.artists.map((function(e){return{id:e.id,name:e.name,genres:e.genres,popularity:e.popularity,followers:e.followers.total,image:e.images[1].url,type:e.type,uri:e.uri}}));return y(t),t})).catch((function(e){return console.log(e)}))};return i.a.createElement("div",{className:"artist-page"},i.a.createElement("div",{className:"ui grid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"sixteen wide column"},i.a.createElement("div",{className:"ui grid"},i.a.createElement("img",{src:s.image,className:"artist-image"}),i.a.createElement("div",{className:"artist-page-header-info pt-12 pl-12"},i.a.createElement("span",{className:"text-6xl"},s.name," "),i.a.createElement("span",{className:"text-4xl"},"\u25cf"),i.a.createElement("span",{className:"text-2xl text-pink-500"}," ",s.type," "),i.a.createElement("div",{className:"text-2xl pt-4"},i.a.createElement("span",{className:"text-pink-500"},s.followers," "),i.a.createElement("span",null,"followers")," \u25cf ",i.a.createElement("span",null,s.popularity)),i.a.createElement("div",{className:"text-2xl pt-4"}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"sixteen wide column"},i.a.createElement("div",{className:"text-2xl pl-12 text-pink-500 mt-4"},"Top tracks"),i.a.createElement(D,{tracks:f}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"sixteen wide column"},i.a.createElement("div",{className:"text-2xl pl-12 text-pink-500 mt-4"},"Related artists"),i.a.createElement(J,{artists:b})))))}));var V=function(){return i.a.createElement(s.a,null,i.a.createElement("div",{className:"App"},i.a.createElement("nav",{className:"ui inverted segment top fixed menu"},i.a.createElement("ul",{className:"ui inverted pointing secondary menu"},i.a.createElement("li",null),i.a.createElement("li",{className:"header item"},i.a.createElement(s.b,{to:"/search"},"Search")))),i.a.createElement(l.c,null,i.a.createElement(l.a,{exact:!0,path:"/album/:id",component:B},i.a.createElement(B,null)),i.a.createElement(l.a,{exact:!0,path:"/artist/:id",component:q},i.a.createElement(q,null)),i.a.createElement(l.a,{path:"/"},i.a.createElement(K,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(197);o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t){e.exports=function(e){var t=e/36e5,a=Math.floor(t),n=a>9?a:"0"+a,r=60*(t-a),i=Math.floor(r),c=i>9?i:"0"+i,o=60*(r-i),s=Math.floor(o),l=s>9?s:"0"+s;return"00"==n?c+":"+l:n+":"+c+":"+l}},39:function(e,t,a){}},[[121,1,2]]]);
//# sourceMappingURL=main.e482c79c.chunk.js.map